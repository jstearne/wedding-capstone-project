{% extends 'base.html' %} {% block content %}

<h1 style=" font-family: 'Pinyon Script', cursive; font-size: 14vw;">Guestbook</h1>

<!--POST CREATE GOES HERE-->
<!--POST CREATE GOES HERE-->

<style>

.container-sm{
    margin-top:-48px;
}
</style>

<!--NEW POST FORM-->
<div class="container-sm">
    <!--HTML post create HERE--><br><br>
    <body class="new-post-form"><!--ORIGINAL: <body class="signup-page">-->
        <h5 class="title" style="text-align: center; font-weight: lighter; color: white; font-weight: bolder;" id="signup-title">Add Message to Guestbook</h5>
        <main class="form-signin">
            <form method="post" action="{% url 'guestbook_create' %}"><!--create post form START-->
                {% csrf_token %}
            <!--New Post form: TITLE FIELD-->
                <div class="form-floating">
                    <input type="text" class="form-control" name="title" id="floatingInput" required id="new_title" placeholder="Title">
                        <label for="floatingInput">Title</label>
                </div>
            <!--New Post form: BODY FIELD-->
                <div class="form-floating">
                    <input type="text" class="form-control" name="body" id="floatingInput" required id="new_body" placeholder="Message">
                        <label for="floatingInput">Message</label>
                </div>
            <!--Submit New Post Form-->
                <button type="submit" class="w-100 btn btn-lg btn btn-success" value="New Post">Add New Message</button>
                <input type="hidden" name="next" value="{{ next }}" />
            </form>
            <!--unnecessary?-->
            <div class="signup-error" style="color: darkgreen; text-align: center;">
                {{ form.errors }}
            </div>
        </main>
    </body>
</div>
<!--END POST CREATE-->

<br><br>

<!--ALL POSTS LOOP HERE-->
<!--ALL POSTS LOOP HERE-->

<div class="container-lg">
    {% for post in posts reversed %}
    <!--Bootstrap card for every post in DB, in order of most recent to oldest-->
    <div class="card">
        <div class="card-header">TITLE TEXT HERE: {{ post.title }}
            <div class="card-body">
                <blockquote class="blockquote mb-0">
                    <p>BODY TEXT HERE: {{ post.body }}</p>
                    <p>Created: {{ post.created_at }}</p>
                    <footer class="blockquote-footer">From: {{ post.user.guest.name }} 
                    <cite title="Source Title">( RSVP'D: {{post.user.guest.rsvp}} )</cite></footer>
                </blockquote>

                    {% if user.is_authenticated and user == post.user %} 
                    <button> 
                        <a href="{% url 'guestbook_update' post.pk %}" class="button btn-primary">EDIT (only author can see!)
                            <span class="icon">
                            <i class="fas fa-trash-alt"></i>
                            </span>
                        </a>
                    </button>
                        <!--only post author can delete!-->
                    <button>
                        <a href="{% url 'guestbook_delete' post.pk %}" class="button btn-warning">DELETE (only author can see!)
                            <span class="icon">
                            <i class="fas fa-trash-alt"></i>
                            </span>
                        </a>
                    </button>
                    {% endif %}
            </div>
        </div>
    </div>                                     
</div>
    <br><!--breathing room between each post-->      
    <!--END Bootstrap card-->
    {% endfor %}
<!--END POST LOOP-->
       



<!--Redundancy better for UX if guestbook scroll is too long. Add TO TOP button-->
    <br>
    <a href="{% url 'guestbook_create' %}">Leave a Message</a>
    <br><br>
    <hr class="solid">
</div>
<!--END OF GUESTBOOK 'CONTAINER'-->


<!-- styled button: BACK TO TOP -->
<div class="container">
    <div class="row">
        <div class="col-xs-12">
            <div class="text-center">
                <a href="{% url 'guestbook' %}">
                    <button type="submit" class=".col-6 w-40 btn btn-lg btn btn-success">
                        Back to Top
                    </button>
                </a>
            </div>
        </div>
    </div>
</div>
<br><br><br><br>

{% endblock %} 







